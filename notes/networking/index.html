<!doctype html><html lang=en-us><title>Networking | 起风了</title>
<meta charset=utf-8><meta name=generator content="Hugo 0.120.4"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://chz-cc.github.io/css/index.css><link rel=canonical href=https://chz-cc.github.io/notes/networking/><link rel=alternate type=application/rss+xml href title=起风了><header><a href=https://chz-cc.github.io/ class=title>起风了</a><nav><a href=/articles>文章</a>
<a href=/notes/til>笔记</a>
<a href=/about>关于我</a></nav></header><article><div class=breadcrumb><li><a href=https://chz-cc.github.io/>Home</a></li><li><a href=https://chz-cc.github.io/notes/>笔记</a></li><li class=active><a href=https://chz-cc.github.io/notes/networking/>Networking</a></li></div><header><h1>Networking</h1><time datetime=2023-11-24T16:24:00+08:00>2023-11-24
</time><span class=header-tag>&nbsp;字数:101&nbsp;用时:1min</span></header><div class=post-content><div class=post-text><h2 id=socket>Socket</h2><p><a href=https://goodyduru.github.io/os/2023/10/03/ipc-unix-domain-sockets.html>IPC - Unix Domain Sockets</a></p><ul><li>IPC: inter-process communication</li><li>BSD: Berkeley Software Distribution: a UNIX-based computer operating system</li></ul><h3 id=socket-api>Socket API</h3><ul><li><code>socket()</code>: 创建一个 socket/endpoint 用于通信。设置通信终端的域名/domain 和语义（TCP、UDP、raw）。可以是 integer 或 对象（不同语言而定）。</li><li><code>bind()</code>: server 端使用。给 socket 映射到一个引用(referrence)，引用通常是 IP:Port 或文件，用于进程间通信（IPC）。</li><li><code>listen()</code>: server 端使用。表示准备好接进来的连接。</li><li><code>connect()</code>: client 端使用。将客户端 socket 与服务端关联起来，使之可以通信。三次握手发生在这里。这里的引用也是 IP:Port 或文件。</li><li><code>accept()</code>: server 端使用。接受一个进来的连接，创建一个新的 socket。这个 socket 用来传递信息。</li><li><code>send()</code> and <code>recv()</code>: 在节点之间传递信息。</li><li><code>close()</code>: 释放资源，发起四次挥手。</li></ul><h2 id=sse>SSE</h2><p><a href=https://www.ruanyifeng.com/blog/2017/05/server-sent_events.html>阮一峰:SSE教程</a> （再次感叹大佬就是大佬，讲得清晰明了）
<a href=https://mp.weixin.qq.com/s/YzcyKsb1Uh3OOB_WHly9SQ>【公众号】解密 SSE，像 ChatGPT 一样返回流式响应</a></p><ul><li>SSE(Server-Sent Events) 服务端推送事件<ul><li>单向通道：服务端向客户端</li><li>http 协议</li></ul></li><li>建立连接<ul><li>客户端发起请求，header <code>Accept: text/event-stream</code></li><li>服务端相应，header <code>Content-Type: text/event-stream</code></li><li>此后保持连接，服务端可以向客户端发送消息。如果断开，客户端会进行重连。</li></ul></li><li>发送消息<ul><li>data 消息体。</li><li>id(optional) 用于重连。</li><li>event(optional) 事件类型，客户端用来区分消息。</li><li>retry(optional) 自动重连等待时间。</li><li>只能发送文本信息。</li></ul></li></ul><p><a href=https://github.com/yuxiaoy1/chatfairy>chatfairy</a> 使用 SSE 实现聊天。</p><ol><li>客户端通过普通的 http 请求发送数据到服务端。</li><li>客户端与服务端建立 SSE 连接。</li><li>服务端通过 SSE 连接，将收到的所有消息按顺序返回到客户端。</li></ol></div><div><details class=post-toc close><summary>Networking</summary><aside><nav id=TableOfContents><ul><li><a href=#socket>Socket</a><ul><li><a href=#socket-api>Socket API</a></li></ul></li><li><a href=#sse>SSE</a></li></ul></nav></aside><a href=# id=toc-toggle></a></details></div></article></html>