<!doctype html><html lang=en-us><title>Emacs | 起风了</title>
<meta charset=utf-8><meta name=generator content="Hugo 0.120.4"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://chz-cc.github.io/css/index.css><link rel=canonical href=https://chz-cc.github.io/notes/emacs/><link rel=alternate type=application/rss+xml href title=起风了><header><a href=https://chz-cc.github.io/ class=title>起风了</a><nav><a href=/articles>文章</a>
<a href=/notes>笔记</a>
<a href=/about>关于我</a></nav></header><article><div class=breadcrumb><li><a href=https://chz-cc.github.io/>首页</a></li><li><a href=https://chz-cc.github.io/notes/>笔记</a></li><li class=active><a href=https://chz-cc.github.io/notes/emacs/>Emacs</a></li></div><header><h1>Emacs</h1><time datetime=2023-11-18T22:28:00+08:00>2023-11-18
</time><span class=header-tag>&nbsp;字数:514&nbsp;用时:3min
&nbsp;分类:
<a href=https://chz-cc.github.io/categories/note/>note</a>
&nbsp;标签:
<a href=https://chz-cc.github.io/tags/emacs/>emacs</a>,
<a href=https://chz-cc.github.io/tags/org/>org</a>,
<a href=https://chz-cc.github.io/tags/org-roam/>org-roam</a></span></header><div class=post-content><div class=post-text><h2 id=basics>Basics</h2><h3 id=基本操作>基本操作</h3><ul><li><code>C-x s</code> save all</li><li><code>C-h C-q</code> 快速帮助（常用快捷键），再次按快捷键关闭快速帮助。</li><li><code>C-h ?</code> 帮助，查看快捷键。没有长命令。 <code>q</code> 退出帮助界面。</li><li><code>C-v</code> 向下翻页</li><li><code>M-v</code> 向上翻页</li><li><code>C-l</code> 光标移动到屏幕中央/上方/下方。</li><li><code>C-space</code> Mark 模式，选择文本。</li><li><code>C-x space</code> Mark Set，矩形选区。</li></ul><h3 id=区块操作>区块操作</h3><p><a href=http://xahlee.info/emacs/emacs/emacs_string-rectangle_ascii-art.html>Emacs: Edit Column Text, Rectangle</a></p><ul><li><code>C-x r k</code> 删除矩形选区（M-x kill-rectangle）<ul><li><code>C-space</code> 选择区域之后，按 <code>C-x r k</code> 将删除 起点 到 终点 之间的矩形选取。</li></ul></li><li><code>C-x r t</code> 替换矩形选取（M-x replace-rectangle）<ul><li><code>C-space</code> 选择区域后，按 <code>C-x r t</code> 替换矩形区域的文本。</li></ul></li><li><code>C-x r y</code> 将 kill-rectangle 的文本粘贴到选定的矩形区域。</li><li><code>C-x r N</code> 插入数字列（rectangle-number-lines）</li><li><code>C-u</code> + <code>C-x r N</code> 插入自定义列表<ul><li>%2d 默认格式，两位的数字。</li><li>%c 字母列表 A-Z。</li></ul></li></ul><h3 id=自定义家目录与配置文件路径>自定义家目录与配置文件路径</h3><p>Windows 环境，默认的配置路径是 <code>"C:\Users\{YourUserName}\.emacs.d"</code> ，配置内容多起来有很多三方依赖、缓存数据等，越来越大，想要放到其盘，比如 F:/。</p><ul><li>在 emacs 安装目录下 <code>".\emacs-29.1\share\emacs\site-lisp\"</code> 添加一个文件 <code>"site-start.el"</code><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defun set-home-dir (dir)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Set a new HOME directory. This is where Emacs will look for init files and
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   where &#39;~&#39; will default to.&#34;</span>
</span></span><span style=display:flex><span>  (setenv <span style=color:#e6db74>&#34;HOME&#34;</span> dir)
</span></span><span style=display:flex><span>  (message (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;HOME location is %s&#34;</span> (getenv <span style=color:#e6db74>&#34;HOME&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(set-home-dir <span style=color:#e6db74>&#34;F:/&#34;</span>)
</span></span></code></pre></div></li></ul><h2 id=org-mode>Org Mode</h2><h3 id=cheat-sheet>Cheat Sheet</h3><p><a href=https://0000-bigtree.github.io/blog/2015/11/28/org-mode.html>参考文章</a></p><ul><li><code>M-f</code> 将光标右移一个单词</li><li><code>M-b</code> 将光标左移一个单词</li><li><code>C-l</code> 将当前光标所在行移动到屏幕中央（注意：这里是字母L）</li><li><code>C-a</code> 将光标移到行首</li><li><code>C-e</code> 将光标移到行尾</li><li><code>C-c</code> C-l : 在光标出插入超链接</li><li><code>M-r</code> move-to-window-line-top-bottom 将光标移动到窗口的上/下/中间</li><li>列表<ul><li><code>M+RET</code> 插入一个同级新列表项</li><li><code>M+S+RET</code> 插入一个带复选框的同级新列表项</li><li><code>C-c C-c</code> 改变复选框状态</li><li><code>C-c -</code> 循环改变列表类型</li></ul></li><li>标题<ul><li><code>C-RET</code> 在后面插入一个同级标题</li><li><code>C-S-RET</code> 后面插入一个TODO同级标题</li><li><code>M-RET</code> 在下面插入一个同级标题(列表)</li><li><code>M-C-RET</code> 在下面插入一个 TODO 同级标题/在下面插入一个同级带复选框的列表</li><li><code>C-c *</code> 将本行设为标题/正文</li><li><code>M-UP/DOWN</code> 移动标题(列表)项</li><li><code>M-LEFT/RIGHT</code> 升级/降级标题(列表)项</li></ul></li></ul><h3 id=tags>Tags orgtag</h3><p><a href=https://orgmode.org/guide/Tags.html>emacs guide</a></p><ul><li>添加标签<ul><li>tag 的格式：字母、数字、&rsquo;_&lsquo;和&rsquo;@&rsquo;。</li><li><code>C-c C-q</code> 在光标所在区域的标题上添加 tag。</li><li><code>C-c C-c</code> 当光标在标题行时，添加 tag。</li></ul></li><li>文件的 tags<ul><li>默认：包含当前 buffer 内所有 tag。</li><li>hard：可以硬指定一组 tags<ul><li><code>(setq org-tag-alist '("t1" "t2" "t3"))</code> 指定一组全局的的标签。</li><li><code>#+TAGS: @work @home @tennisclub</code> 在文件中添加文件头 TAGS。</li><li><code>#+TAGS: laptop car pc sailboat</code> 另一种写法。</li></ul></li><li><em>fast tag selection</em> 通过单个键快速搜索<ul><li>全局设置 <code>(setq org-tag-alist '(("@work" . ?w) ("@home" . ?h) ("laptop" . ?l)))</code></li><li>单个文件设置 <code>#+TAGS: @work(w) @home(h) @tennisclub(t) laptop(l) pc(p)</code></li></ul></li></ul></li><li>tag group<ul><li><code>#+TAGS: [ GTD : Control Persp ]</code></li><li><code>#+TAGS: { Context : @Home @Work }</code> 组内 tag 互斥。</li><li>忽略组 tag 命令 <code>org-toggle-tags-groups</code> 对应快捷键 <code>C-c C-x q</code></li></ul></li><li>搜索标签<ul><li><code>C-c / m</code> 或者 <code>C-c \</code> 在当前 buffer 中搜索。加上 <code>C-u</code> 忽略不是 TODO 的标题行。</li><li><code>M-x org-agenda m</code> Create a global list of tag matches from all agenda files.</li><li><code>M-x org-agenda M</code> Create a global list of tag matches from all agenda files, but check only TODO items and force checking subitems.</li></ul></li></ul><h2 id=org-roam>Org-roam orgroam</h2><p>常用快捷键：</p><ol><li><code>C-c n f</code> 查找节点/node，如果没有，新建（f=find）。</li><li><code>C-c C-c</code> 完成节点创建。</li><li><code>C-c C-k</code> 终止节点创建。</li><li><code>C-c n i</code> 在笔记任意位置插入新的节点。</li><li><code>C-c C-o</code> 打开到光标所在位置对应的子节点的链接。</li><li><code>C-c C-.</code> 返回上一级。</li><li><code>M-x org-id-get-created</code> 基于 headline 创建节点。</li></ol><h2 id=buffer>buffer</h2><h3 id=选择-buffer>选择 buffer</h3><ul><li><code>C-x b</code> 在当前窗口切换 buffer</li><li><code>C-x 4 b</code> 在另外的窗口切换 buffer</li><li><code>C-x 4 C-f</code> 在另外的窗口打开文件</li><li><code>C-x 5 b</code> 在另外的 frame 切换 buffer</li><li><code>M-x delete-frame</code> 关闭当前 Frame。</li><li><code>C-x 0</code> 关闭当前 buffer</li><li><code>C-x 1</code> 关闭当前 buffer 以外的所有 buffer</li><li><code>C-x 2</code> 将当前 buffer 上下分屏</li><li><code>C-x 3</code> 将当前 buffer 左右分屏</li></ul><h3 id=ibuffer>Ibuffer</h3><p><code>(global-set-key (kbd "C-x C-b") 'ibuffer)</code> 绑定快捷键，~C-x C-b~ 进入 ibuffer 模式。
<a href=https://zhuanlan.zhihu.com/p/482720932>buffer 管理与 ibuffer的介绍与使用&ndash;知乎</a></p><h4 id=标记>标记</h4><ul><li><code>m</code> 标记光标所在 buffer</li><li><code>d</code> 标记光标所在 buffer 为将删除</li><li><code>t</code> 取消所有标记，并标记所有未标记的 buffer</li><li><code>u</code> 取消光标所在 buffer 标记</li><li><code>U</code> 取消所有标记</li></ul><h4 id=筛选>筛选</h4><ul><li><code>/</code> 根据所有的 major mode 筛选</li><li><code>/ m</code> 根据 buffer 中使用的 major mode 筛选（major mode in use）</li><li><code>/ n</code> 根据 buffer name 进行筛选</li><li><code>/ c</code> 根据 buffer 内容进行筛选（c for contents）</li><li><code>/ b</code> 根据文件基础名字（不带扩展名）进行筛选</li><li><code>/ F</code> 根据目录名进行筛选（不含文件名）</li><li><code>/ f</code> 根据文件名进行筛选（绝对路径名）</li><li><code>/ .</code> 根据扩展名进行筛选</li><li><code>/ i</code> 筛选处于 modified 的 buffer</li></ul><h4 id=排序>排序</h4><ul><li><code>,</code> 切换排序方式</li><li><code>s i</code> 对当前排序逆序排列</li><li><code>s a</code> 字母排序</li><li><code>s f</code> 文件名</li><li><code>s v</code> 最近访问</li><li><code>s s</code> 根据文件大小排序</li></ul><h2 id=emacs-lisp>Emacs Lisp</h2><h3 id=time-string-format>time string format</h3><p><a href=https://www.gnu.org/software/emacs/manual/html_node/elisp/Time-Parsing.html>Parsing and Formating Times</a></p><ul><li>%a 缩写的星期几</li><li>%A 全称的星期几</li></ul><p>问题：</p><ul><li>Windows 日期显示乱码： <code>(setq system-time-locale "C")</code> 强制使用默认 locale。</li></ul></div><div><details class=post-toc close><summary>目录</summary><nav id=TableOfContents><ul><li><a href=#basics>Basics</a><ul><li><a href=#基本操作>基本操作</a></li><li><a href=#区块操作>区块操作</a></li><li><a href=#自定义家目录与配置文件路径>自定义家目录与配置文件路径</a></li></ul></li><li><a href=#org-mode>Org Mode</a><ul><li><a href=#cheat-sheet>Cheat Sheet</a></li><li><a href=#tags>Tags orgtag</a></li></ul></li><li><a href=#org-roam>Org-roam orgroam</a></li><li><a href=#buffer>buffer</a><ul><li><a href=#选择-buffer>选择 buffer</a></li><li><a href=#ibuffer>Ibuffer</a><ul><li><a href=#标记>标记</a></li><li><a href=#筛选>筛选</a></li><li><a href=#排序>排序</a></li></ul></li></ul></li><li><a href=#emacs-lisp>Emacs Lisp</a><ul><li><a href=#time-string-format>time string format</a></li></ul></li></ul></nav><a href=# id=toc-toggle></a></details></div></div></article><body><script src=https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js></script><script>addBackToTop({diameter:40})</script></body></html>